<div class="mt-5">
  <h2 class="text-center text-blue-500 text-2xl">Gestion des munitions</h2>
  @if (ammunition.length > 0) {
  <p-tabView>
    <p-tabPanel header="{{ammunition.length}} Munitions enregistrées">
      @if (!newAmmunitionForm){
      <p-table [value]="ammunition" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
          <tr>
            <th>Id</th>
            <th>Marque</th>
            <th>Model</th>
            <th>Vitesse initiale</th>
            <th>Poids</th>
            <th>Ajouté le</th>
            <th class="text-center">Modifier</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-ammo>
          <tr>
            <td>{{ ammo.id }}</td>
            <td>{{ ammo.factory.name }}</td>
            <td>{{ ammo.name }}</td>
            <td>{{ ammo.initialSpeed}} m/s</td>
            <td>{{ ammo.weight.grains }} grains</td>
            <td>{{ ammo.createdAt | date:'dd MMM yyyy' }}</td>
            <td class="text-center">
              <p-button
                label="Editer"
                icon="pi pi-user-edit"
                [text]="true"></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
      }

      <div class="mt-2 text-center">
        <p-button
          label="Ajouter"
          icon="pi pi-plus"
          (onClick)="addAmmunition()"></p-button>
        @defer (when newAmmunitionForm){ @if (newAmmunitionForm){
        <app-ammunition-add
          (newAmmunitionAdded)="newAmmunition($event)"></app-ammunition-add>
        } }
      </div>
    </p-tabPanel>
    <p-tabPanel header=" Marques disponibles">
      <ng-template pTemplate="content">
        <app-factory-table-list
          [factoryType]="FactoryType.AMMUNITION"></app-factory-table-list>
      </ng-template>
    </p-tabPanel>
    <p-tabPanel header="Calibres">
      <ng-template pTemplate="content">
        <app-caliber-table-list></app-caliber-table-list>
      </ng-template>
    </p-tabPanel>
  </p-tabView>

  }
</div>
