<div class="mt-5">
  @if (ammunition.length > 0) {
  <p-accordion>
    <p-accordionTab header="{{ammunition.length}} Munitions enregistrées">
      @if (!newAmmunitionForm){
      <p-table [value]="ammunition" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
          <tr>
            <th>Id</th>
            <th>Marque</th>
            <th>Model</th>
            <th>Vitesse initiale</th>
            <th>Poids</th>
            <th>Ajouté le</th>
            <th class="text-center">Modifier</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-ammo>
          <tr>
            <td>{{ ammo.caliber.caliber }}</td>
            <td>{{ ammo.factory.name }}</td>
            <td>{{ ammo.name }}</td>
            <td>{{ ammo.initialSpeed}} m/s</td>
            <td>{{ ammo.weight.grains }} grains</td>
            <td>{{ ammo.createdAT | date:'dd MMM yyyy' }}</td>
            <td class="text-center">
              <p-button
                label="Editer"
                icon="pi pi-user-edit"
                [text]="true"></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
      }

      <div class="mt-2 text-center">
        <p-button
          label="Ajouter"
          icon="pi pi-plus"
          (onClick)="addAmmunition()"></p-button>
        @defer (when newAmmunitionForm){ @if (newAmmunitionForm){
        <app-ammunition-add
          (newAmmunitionAdded)="newAmmunition($event)"></app-ammunition-add>
        } }
      </div>
    </p-accordionTab>
    <p-accordionTab header="{{ammunitionFactories.length}} Marques disponibles">
      <p-table
        [value]="ammunitionFactories"
        [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
          <tr>
            <th>Id</th>
            <th>Nom</th>
            <th class="text-center">Modifier</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-factory>
          <tr>
            <td>{{ factory.id }}</td>
            <td>{{ factory.name }}</td>
            <td class="text-center">
              <p-button
                label="Editer"
                icon="pi pi-user-edit"
                [text]="true"></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
      <div class="mt-2 text-center">
        <p-button label="Ajouter" icon="pi pi-plus"></p-button>
      </div>
    </p-accordionTab>
    <p-accordionTab header="{{calibers.length}} Calibres enregistrés">
      <p-table [value]="calibers" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
          <tr>
            <th>Id</th>
            <th>Calibre</th>
            <th class="text-center">Modifier</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-caliber>
          <tr>
            <td>{{ caliber.id }}</td>
            <td>{{ caliber.caliber }}</td>
            <td class="text-center">
              <p-button
                label="Editer"
                icon="pi pi-user-edit"
                [text]="true"></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-accordionTab>
  </p-accordion>

  }
</div>
